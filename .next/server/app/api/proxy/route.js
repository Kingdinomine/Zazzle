"use strict";(()=>{var e={};e.id=11,e.ids=[11],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8692:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>x,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>R,staticGenerationAsyncStorage:()=>y});var n={};r.r(n),r.d(n,{GET:()=>d,HEAD:()=>c,OPTIONS:()=>u,dynamic:()=>i,runtime:()=>p});var s=r(9303),a=r(8716),o=r(670);let p="nodejs",i="force-dynamic";function l(e){e.set("Access-Control-Allow-Origin","*"),e.set("Access-Control-Allow-Methods","GET, HEAD, OPTIONS"),e.set("Access-Control-Allow-Headers","Content-Type, Range"),e.set("Access-Control-Expose-Headers","Content-Range, Accept-Ranges, Content-Type")}async function u(){let e=new Headers;return l(e),new Response(null,{status:204,headers:e})}async function c(e){let{searchParams:t}=new URL(e.url),r=t.get("url"),n=t.get("referer")||t.get("ref")||"",s=t.get("origin")||"",a=new Headers;if(l(a),!r)return Response.json({error:"Missing url parameter"},{status:400,headers:a});let o={Accept:"*/*","User-Agent":e.headers.get("user-agent")||"Mozilla/5.0"},p=e.headers.get("range");p&&(o.Range=p),n&&(o.Referer=n),s&&(o.Origin=s);let i=await fetch(r,{method:"HEAD",headers:o,redirect:"follow"}),u=new Headers(a);u.set("Accept-Ranges",i.headers.get("accept-ranges")||"bytes");let c=i.headers.get("content-range");c&&u.set("Content-Range",c);let d=i.headers.get("content-type");return d&&u.set("Content-Type",d),u.set("X-Proxy-By","next-hls-proxy"),new Response(null,{status:i.status,headers:u})}async function d(e){let{searchParams:t}=new URL(e.url),r=t.get("url"),n=t.get("referer")||t.get("ref")||"",s=t.get("origin")||"",a=new Headers;if(l(a),!r)return Response.json({error:"Missing url parameter"},{status:400,headers:a});try{let t={Accept:"*/*","User-Agent":e.headers.get("user-agent")||"Mozilla/5.0"},o=e.headers.get("range");o&&(t.Range=o),n&&(t.Referer=n),s&&(t.Origin=s);let p=await fetch(r,{headers:t,redirect:"follow"}),i=p.headers.get("content-type")||"",l=i.includes("application/vnd.apple.mpegurl")||i.includes("application/x-mpegURL")||/\.m3u8(\?|$)/i.test(r),u=new Headers(a);u.set("Accept-Ranges",p.headers.get("accept-ranges")||"bytes");let c=p.headers.get("content-range");if(c&&u.set("Content-Range",c),u.set("X-Proxy-By","next-hls-proxy"),l){let e=await p.text(),t=new URL(r),a=n?`&referer=${encodeURIComponent(n)}`:"",o=s?`&origin=${encodeURIComponent(s)}`:"",i=e=>{try{return new URL(e,t).toString()}catch{return e}},l=e=>`/api/proxy?url=${encodeURIComponent(e)}${a}${o}`,c=(e=(e=e.replace(/(#EXT-X-KEY:([^\n]*?)URI=")([^"]+)("[^\n]*?)/g,(e,t,r,n,s)=>`${t}${l(i(n))}${s}`)).replace(/(#EXT-X-MAP:([^\n]*?)URI=")([^"]+)("[^\n]*?)/g,(e,t,r,n,s)=>`${t}${l(i(n))}${s}`)).split(/\n/).map(e=>{if(!e||e.startsWith("#"))return e;let t=i(e.trim());return l(t)}).join("\n");return u.set("Content-Type","application/vnd.apple.mpegurl"),new Response(c,{status:p.status,headers:u})}let d=p.headers.get("content-type");return d&&u.set("Content-Type",d),new Response(p.body,{status:p.status,headers:u})}catch(e){return Response.json({error:"Proxy failed",details:String(e?.message||e)},{status:500,headers:a})}}let g=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/proxy/route",pathname:"/api/proxy",filename:"route",bundlePath:"app/api/proxy/route"},resolvedPagePath:"C:\\Users\\kingd\\Desktop\\Eclipse\\app\\api\\proxy\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:h,staticGenerationAsyncStorage:y,serverHooks:R}=g,m="/api/proxy/route";function x(){return(0,o.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:y})}},9303:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(8692));module.exports=n})();